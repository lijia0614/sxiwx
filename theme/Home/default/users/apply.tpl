<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>创作平台</title>
    <link href="css/app_1f306cd5.css?" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/1_99667ca8.css">
    <script charset="utf-8" src="js/1_99667ca8.js"></script>
</head>
<body><!--[if lt IE 10]>

<![endif]-->
<div id="root">
    <div class="app-wrap">
        <include file="common:users_header"/>
        <div style="height: auto" class="apply-wrap"><h2 class="title">申请作者</h2>

            <div class="step-0">
                <div class="ant-row ant-form-item ant-form-item-with-help" style="margin-bottom: 30px;">
                    <div class="ant-col-2 ant-col-offset-6 ant-form-item-label">
                        <label class="ant-form-item-required" title="笔名">笔名</label>
                    </div>
                    <div class="ant-col-9 ant-form-item-control-wrapper">
                        <div class="ant-form-item-control">
                            <span class="ant-form-item-children">
                                <input id="pen_name" type="text" class="ant-input ant-input-lg" value="">
                            </span>
                            <div class="ant-form-explain">2-10个汉字，数字或英文字母组成，笔名申请后不可变更</div>
                        </div>
                    </div>
                </div>
                <div class="ant-row ant-form-item ant-form-item-with-help" style="margin-bottom: 30px;">
                    <div class="ant-col-2 ant-col-offset-6 ant-form-item-label">
                        <label class="ant-form-item-required" title="QQ">QQ</label>
                    </div>
                    <div class="ant-col-9 ant-form-item-control-wrapper">
                        <div class="ant-form-item-control">
                            <span class="ant-form-item-children">
                                <input type="number" id="qq" class="ant-input ant-input-lg" value=""></span>
                            <div class="ant-form-explain">请填写常用的QQ号码，便于编辑快速联系到您</div>
                        </div>
                    </div>
                </div>
                <div class="ant-row ant-form-item ant-form-item-with-help" style="margin-bottom: 30px;">
                    <div class="ant-col-2 ant-col-offset-6 ant-form-item-label">
                        <label class="" title="微信">微信</label>
                    </div>
                    <div class="ant-col-9 ant-form-item-control-wrapper">
                        <div class="ant-form-item-control">
                            <span class="ant-form-item-children">
                                <input type="text" id="wechat" class="ant-input ant-input-lg" value=""></span>
                            <div class="ant-form-explain">请填写常用的微信号码，便于编辑快速联系到您</div>
                        </div>
                    </div>
                </div>

                <div class="ant-row ant-form-item ant-form-item-with-help" style="margin-bottom: 30px;">
                    <div class="ant-col-2 ant-col-offset-6 ant-form-item-label">
                        <label class="" title="真实姓名">真实姓名</label>
                    </div>
                    <div class="ant-col-9 ant-form-item-control-wrapper">
                        <div class="ant-form-item-control">
                            <span class="ant-form-item-children">
                                <input type="text" id="name" class="ant-input ant-input-lg" value="">
                            </span>
                        </div>
                    </div>
                </div>

                <div class="ant-row ant-form-item ant-form-item-with-help" style="margin-bottom: 30px;">
                    <div class="ant-col-2 ant-col-offset-6 ant-form-item-label">
                        <label class="" title="身份证号码">身份证号码</label>
                    </div>
                    <div class="ant-col-9 ant-form-item-control-wrapper">
                        <div class="ant-form-item-control">
                            <span class="ant-form-item-children">
                                <input type="text" id="id_num" class="ant-input ant-input-lg" value="">
                            </span>
                        </div>
                    </div>
                </div>

                <div class="ant-row ant-form-item ant-form-item-with-help" style="margin-bottom: 30px;">
                    <div class="ant-col-2 ant-col-offset-6 ant-form-item-label">
                        <label class="" title="详细地址">详细地址</label>
                    </div>
                    <div class="ant-col-9 ant-form-item-control-wrapper">
                        <div class="ant-form-item-control">
                            <span class="ant-form-item-children">
                                <input type="text" id="address" class="ant-input ant-input-lg" value="">
                            </span>
                            <div class="ant-form-explain">如：省，市，区，详细街道小区</div>
                        </div>
                    </div>
                </div>

                <div class="ant-row ant-form-item ant-form-item-with-help" style="margin-bottom: 30px;">
                    <div class="ant-row ant-form-item" style="margin-bottom: 30px;">
                        <div class="ant-col-2 ant-col-offset-6 ant-form-item-label">
                            <label class="ant-form-item-required" title="性别">性别</label>
                        </div>
                        <div  class="ant-col-9 ant-form-item-control-wrapper">
                            <div class="ant-form-item-control">
                                <span class="ant-form-item-children">
                                    <div class="ant-radio-group">
                                        <label name="sex" class="ant-radio-wrapper ant-radio-wrapper-checked">
                                            <span class="ant-radio ">
                                                <input type="radio" class="ant-radio-input" value="1">
                                                <span class="ant-radio-inner"></span>
                                            </span>
                                            <span>男</span>
                                        </label>
                                        <label class="ant-radio-wrapper">
                                            <span class="ant-radio">
                                                <input type="radio" class="ant-radio-input" value="2">
                                                <span class="ant-radio-inner"></span>
                                            </span>
                                            <span>女</span>
                                        </label>
                                    </div>
                                </span>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="ant-row ant-form-item">
                    <div class="ant-col-offset-8 ant-form-item-control-wrapper">
                        <div class="ant-form-item-control">
                            <span class="ant-form-item-children">
                                <button type="button" class="ant-btn ant-btn-primary ant-btn-lg" style="width: 160px;">
                                    <span>提交</span>
                                </button>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <footer class="text-center">Copyright © 2017-2018 {$site_name} All Rights Reserved</footer>
    </div>
</div>
<script>
    $('.ant-radio-group label').on('click',function () {
        $(this).addClass('ant-radio-wrapper-checked').siblings().removeClass('ant-radio-wrapper-checked');
        $(this).find('span.ant-radio').addClass('ant-radio-checked').parents('label').siblings('label').find('span.ant-radio').removeClass('ant-radio-checked');
        $(this).find("input.ant-radio-input").attr("checked",true).parents('label').siblings('label').find("input.ant-radio-input").attr("checked",false)
    })
</script>
<script>
    $('.ant-btn-lg').click(function () {
        var pen_name = $('#pen_name').val();
        var name = $('#name').val();
        var qq = $('#qq').val();
        var wechat = $('#wechat').val();
        var id_num = $('#id_num').val();
        var address = $('#address').val();
        var sex = $("input[type='radio']:checked").val();
        var pattern = /(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;

        if (pen_name == ''){
            layer.alert('请填写笔名'); return false;
        }
        if (qq == ''){
            layer.alert('请填写QQ'); return false;
        }

        if(qq.length < 5){
            layer.alert('请填写正确的QQ'); return false;
        }
        if (wechat == ''){
            layer.alert('请填写微信'); return false;
        }
        if (name == ''){
            layer.alert('请填写真实姓名'); return false;
        }
        if (id_num == '') {
            layer.alert('请填写身份证号码');return false;
        }
        if(pattern.test(id_num) == false){
            layer.alert('请填写正确的身份证号码');return false;
        }
        if (address == ''){
            layer.alert('请填写详细地址'); return false;
        }
        if (sex == undefined){
            layer.alert('请选择性别'); return false;
        }
        $.ajax({
            url:"{:url('users/apply')}",
            data:{"pen_name":pen_name,"name":name,"qq":qq,"wechat":wechat,"id_num":id_num,"address":address,"sex":sex},
            type:"POST",
            success:function(req){
//                console.log(req);return;
                if (req.code == 0){
                    layer.alert(req.msg); return false;
                }
                if (req.code == 1){
                    setTimeout(function(){ window.location.href = "{:url('users/home')}"; }, 2000);
                }
            }
        });
    })
</script>

</body>